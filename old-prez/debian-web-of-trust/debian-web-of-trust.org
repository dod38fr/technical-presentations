#+TITLE: La chaîne de confiance de Debian
#+SUBTITLE: Debian Web of trust
#+AUTHOR: Dominique Dumont
#+EMAIL: domi.dumont@free.fr
#+OPTIONS: timestamp:nil creator:nil num:nil toc:nil

#+HTML_HEAD_EXTRA: <link rel="stylesheet" type="text/css" href="pres.css" />


# audience: window and mac users on top of linux users (if any). Some beginners

* Qui suis-je ?

- Dominique Dumont (@dod38fr)
- Freelance devops depuis 2020
- Debian Developer depuis 2011
- Contributeur en Open-Source depuis 1996

* Qu'est que le projet Debian

  [[./openlogo.svg]]

- distribution Linux «universelle»
- pour serveurs, ordinateur de bureau, carte ARM
- logiciel libre (pas simplement gratuit)
- base de Ubuntu, Linux Mint, Raspbian et d'autres

* Examples d'installation de logiciel

- ~sudo apt install un-logiciel~
- ~npm install -g unLogiciel~
- ~brew install unLogiciel~
- =go install github.com/acme/un-logiciel=
- ~choco install un-logiciel~
- ~docker run acme/un-logiciel~
- ~curl https://acme.com/un-logiciel.sh | sudo bash -~

** Une question de confiance

#+attr_html: :class pres-image
[[file:radio-active.jpeg]]

Installer un logiciel implique une confiance absolue:
- envers l'auteur 
- sur le serveur de stockage
- sur le moyen de transport

* Installation d'un paquet Debian

 ~sudo apt install cme~

- trouve l'URL du paquet sur un serveur miroir
- télécharge le paquet
- installe le paquet

Mais:
- les serveurs miroirs ne sont pas sous le contrôle de Debian
- la connection n'est pas sûre (ftp, http)

** Solution / 1ère partie

#+attr_html: :class pres-image
file:logo-gnupg-light-purple-bg.png

Utiliser de la crypto (~gpg~) pour vérifier le contenu. Dans l'exemple avec
~cme~, les outils Debian vérifient:
- l'intégrité du paquet à installer
- que le paquet a été signé par l'infra Debian
- que le paquet a été construit à partir d'un source signé par
  ~dod@debian.org~
- que ~dod@debian.org~ est sur la liste des personnes autorisées 

#+BEGIN_NOTES
C'est un résumé, en pratique, c'est plus compliqué:
- Le paquet source est signé avec la clef privée de ~dod~.
- il est vérifié par Debian
- re-signé avec une clef controllée par le projet
- compilé
- le paquet binaire est envoyé sur une archive controllée par Debian
- un inventaire des paquet avec leur hash est construit
- cet inventaire est signé avec  avec une clef controllée par le projet
- cet inverntaire et les paquets sont mirrorés sur les serveurs
- apt télécharge et vérifie cet inventaire
- le hash de chaque paquet est vérifié avant installation
La clef publique de ~dod@debian.org~ et les clefs du projet sont dans le paquet ~debian-keyring~
#+END_NOTES

** Problème

Qui se cache derrière ~dod@debian.org~ ? 

Une personne, une compagnie ?

Comment lui faire confiance ?

** Solution / 2e partie

A charge pour le projet Debian de vérifier:
- l'identité de ~dod~ 
- que ~dod~ est membre de Debian

** Problème

Les développeurs sont répartis dans le monde. Pas moyen pour les
principaux responsables de Debian de rencontrer les nouveaux
participants.

** Solution

Chaque développeur Debian peut:
- vérifier l'identité d'une personne (pièce d'identité requise)
- signer la clef publique gpg de cette personne avec sa clef privée
- et réciproquement
- cette étape est indispensable pour qu'un contributeur devienne développeur Debian

* Et la confiance dans tout ça ?

- le web of trust garantie l'identité réelle d'un développeur Debian
- mais pas ses intentions.
- elles sont vérifiées petit à petit quand une personne
  contribue puis devient développeur Debian

C'est pas parfait, mais ça fonctionne bien.

* Qu'en est-il de votre gestionnaire de paquet favori ?

Quelle est chaîne de confiance de votre gestionnaire de paquet favori?

Y-a t'il des points faibles ?

** COMMENT Go Terraform - Github
# outside my jurisdiction

- peu ou pas de signatures dans les repos
- authentification nécessaire pour pousser du contenu
- pas d'identité derrière les comptes github
- basé uniquement sur la confiance sur un compte anonyme
- ou sur la confiance que d'autre personnes ont lu le code

* COMMENT Implémentation dans Debian

** COMMENT Mise à jour des signatures des Debian Developers

- Quand ?
  - pour les nouveaux contributeurs
  - mise à jour des dates d'expiration des clefs
- Comment ?
  - envoi des clefs sur =keyring.debian.org=

** COMMENT Cycle de vie des paquets

- un paquet source est signé par un Debian Dev
- la signature est vérifiée sur les serveurs Debian
- le paquet binaire est signé par une clef debian
- le paquet binaire et sa signature sont envoyés sur les serveurs
  de paquet
- sur vos système le paquet binaire est vérifié par =apt=
- plus d'info: [[https://manpages.debian.org/buster/apt/apt-secure.8.en.html][apt-secure(8)]]
      
* COMMENT Application pratique

Si vous voulez contribuer à Debian, je peux signer vos clefs à
l'apéro.

#+attr_html: :style width: 300px
file:bieres.jpg


#+BEGIN_COMMENT
Avis aux contributeurs Debian sur Grenoble: Dans le cadre de Human
talks, je vais proposer une Debian key signing Party le Mardi 10
Décembre. Pour participer inscrivez vous aux human talks
 https://www.meetup.com/HumanTalks-Grenoble/events/qpjhchyzqbnb/
et envoyez moi par DM les information listées en Step 4 de cette page:
https://wiki.debian.org/Keysigning
#+END_COMMENT
